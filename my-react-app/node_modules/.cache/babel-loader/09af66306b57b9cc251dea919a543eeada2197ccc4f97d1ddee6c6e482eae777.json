{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Materii ASE\\\\Lucrare de licenta\\\\SoftwareProduct\\\\my-react-app\\\\src\\\\components\\\\AssetsList.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { fetchServer } from '../api_s/fetchServer';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAssets, setLastUpdate, setError } from '../store/slices/slice';\nimport Table from './layout/Table';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AssetsList() {\n  _s();\n  const collection = useSelector(state => state.global.collection);\n  const error = useSelector(state => state.global.error);\n  const [loading, setLoading] = useState(false);\n  const dispatch = useDispatch();\n  //eg.: dispatch(setCollection('stocks'))\n  useEffect(() => {\n    setLoading(true);\n    fetchServer(collection).then(el => {\n      dispatch(setAssets(el.data));\n      dispatch(setLastUpdate(el.timestamp));\n      dispatch(setError(null));\n    }).catch(err => {\n      console.error(err);\n      setError(err.message);\n    });\n    setTimeout(() => {\n      setLoading(false);\n    }, 5000);\n  }, [collection]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !error ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: !loading ? /*#__PURE__*/_jsxDEV(Table, {\n        watchlist: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Salut\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 21\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"//TODO\"\n    }, void 0, false)\n  }, void 0, false);\n}\n_s(AssetsList, \"Ai+eMfjXRzZ5mY0yvm+gmBXyRiU=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = AssetsList;\nexport default AssetsList;\nvar _c;\n$RefreshReg$(_c, \"AssetsList\");","map":{"version":3,"names":["useEffect","useState","fetchServer","useSelector","useDispatch","setAssets","setLastUpdate","setError","Table","jsxDEV","_jsxDEV","Fragment","_Fragment","AssetsList","_s","collection","state","global","error","loading","setLoading","dispatch","then","el","data","timestamp","catch","err","console","message","setTimeout","children","watchlist","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/Materii ASE/Lucrare de licenta/SoftwareProduct/my-react-app/src/components/AssetsList.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\nimport {fetchServer} from '../api_s/fetchServer'\r\nimport {useSelector ,useDispatch} from 'react-redux'\r\nimport {setAssets,setLastUpdate,setError } from '../store/slices/slice'\r\nimport Table from './layout/Table'\r\n\r\nfunction AssetsList(){\r\n    const collection=useSelector(state=>state.global.collection)\r\n    const error=useSelector(state=>state.global.error)\r\n    const [loading,setLoading] =useState(false)\r\n\r\n    const dispatch=useDispatch()\r\n    //eg.: dispatch(setCollection('stocks'))\r\n    useEffect(()=>{\r\n        setLoading(true)\r\n        fetchServer(collection).then(el=>{\r\n            dispatch(setAssets(el.data))\r\n            dispatch(setLastUpdate(el.timestamp))\r\n            dispatch(setError(null))\r\n        }).catch(err=>{\r\n            console.error(err)\r\n            setError(err.message)\r\n        })\r\n        setTimeout(()=>{\r\n            setLoading(false)\r\n        },5000)\r\n    },[collection])\r\n    return(\r\n        <>\r\n            {!error \r\n                ?\r\n                <>\r\n                {!loading ?\r\n                    <Table watchlist={false}/> \r\n                        :\r\n                    <div>Salut</div>\r\n                }\r\n                </>\r\n                :\r\n                <>\r\n                    //TODO\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}\r\nexport default AssetsList"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAAQC,WAAW,QAAO,sBAAsB;AAChD,SAAQC,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,SAAQC,SAAS,EAACC,aAAa,EAACC,QAAQ,QAAQ,uBAAuB;AACvE,OAAOC,KAAK,MAAM,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAElC,SAASC,UAAUA,CAAA,EAAE;EAAAC,EAAA;EACjB,MAAMC,UAAU,GAACZ,WAAW,CAACa,KAAK,IAAEA,KAAK,CAACC,MAAM,CAACF,UAAU,CAAC;EAC5D,MAAMG,KAAK,GAACf,WAAW,CAACa,KAAK,IAAEA,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EAClD,MAAM,CAACC,OAAO,EAACC,UAAU,CAAC,GAAEnB,QAAQ,CAAC,KAAK,CAAC;EAE3C,MAAMoB,QAAQ,GAACjB,WAAW,CAAC,CAAC;EAC5B;EACAJ,SAAS,CAAC,MAAI;IACVoB,UAAU,CAAC,IAAI,CAAC;IAChBlB,WAAW,CAACa,UAAU,CAAC,CAACO,IAAI,CAACC,EAAE,IAAE;MAC7BF,QAAQ,CAAChB,SAAS,CAACkB,EAAE,CAACC,IAAI,CAAC,CAAC;MAC5BH,QAAQ,CAACf,aAAa,CAACiB,EAAE,CAACE,SAAS,CAAC,CAAC;MACrCJ,QAAQ,CAACd,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC5B,CAAC,CAAC,CAACmB,KAAK,CAACC,GAAG,IAAE;MACVC,OAAO,CAACV,KAAK,CAACS,GAAG,CAAC;MAClBpB,QAAQ,CAACoB,GAAG,CAACE,OAAO,CAAC;IACzB,CAAC,CAAC;IACFC,UAAU,CAAC,MAAI;MACXV,UAAU,CAAC,KAAK,CAAC;IACrB,CAAC,EAAC,IAAI,CAAC;EACX,CAAC,EAAC,CAACL,UAAU,CAAC,CAAC;EACf,oBACIL,OAAA,CAAAE,SAAA;IAAAmB,QAAA,EACK,CAACb,KAAK,gBAEHR,OAAA,CAAAE,SAAA;MAAAmB,QAAA,EACC,CAACZ,OAAO,gBACLT,OAAA,CAACF,KAAK;QAACwB,SAAS,EAAE;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,gBAE1B1B,OAAA;QAAAqB,QAAA,EAAK;MAAK;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC,gBAElB,CAAC,gBAEH1B,OAAA,CAAAE,SAAA;MAAAmB,QAAA,EAAE;IAEF,gBAAE;EAAC,gBAET,CAAC;AAEX;AAACjB,EAAA,CAvCQD,UAAU;EAAA,QACEV,WAAW,EAChBA,WAAW,EAGRC,WAAW;AAAA;AAAAiC,EAAA,GALrBxB,UAAU;AAwCnB,eAAeA,UAAU;AAAA,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}