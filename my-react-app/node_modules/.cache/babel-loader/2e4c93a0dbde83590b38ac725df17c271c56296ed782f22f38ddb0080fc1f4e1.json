{"ast":null,"code":"var _s = $RefreshSig$();\nimport { setToken } from \"../store/slices/slice\";\nimport { useDispatch } from \"react-redux\";\nasync function useCheckToken() {\n  _s();\n  const dispatch = useDispatch();\n  try {\n    const token = localStorage.getItem('token');\n    if (token) {\n      const response = await fetch(`${process.env.REACT_APP_LOCAL_SERVER}authentification/verifytoken`, {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          token\n        })\n      });\n      const result = await response.json();\n      if (response.status != 200) {\n        localStorage.removeItem('token');\n        throw new Error(result.message);\n      }\n      return token;\n    }\n  } catch (error) {\n    dispatch(setToken(null));\n    console.error(error.message);\n  }\n}\n_s(useCheckToken, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\nexport { useCheckToken };","map":{"version":3,"names":["setToken","useDispatch","useCheckToken","_s","dispatch","token","localStorage","getItem","response","fetch","process","env","REACT_APP_LOCAL_SERVER","method","headers","body","JSON","stringify","result","json","status","removeItem","Error","message","error","console"],"sources":["C:/Users/User/Materii ASE/Lucrare de licenta/SoftwareProduct/my-react-app/src/custom_hooks/useCheckToken.js"],"sourcesContent":["import { setToken } from \"../store/slices/slice\"\r\nimport { useDispatch } from \"react-redux\"\r\n\r\nasync function useCheckToken(){\r\n    const dispatch=useDispatch()\r\n    try {\r\n        const token=localStorage.getItem('token')\r\n\r\n        if(token){\r\n            const response = await fetch(`${process.env.REACT_APP_LOCAL_SERVER}authentification/verifytoken`,{\r\n                method:\"POST\",\r\n                headers:{\r\n                    'Content-Type':'application/json'\r\n                },\r\n                body:JSON.stringify({token})\r\n            })\r\n            const result=await response.json()\r\n            if(response.status!=200){\r\n                localStorage.removeItem('token')\r\n                throw new Error(result.message)\r\n            }\r\n            return token    \r\n        }\r\n    } catch (error) {\r\n        dispatch(setToken(null))\r\n        console.error(error.message)\r\n    }\r\n}\r\n\r\nexport {useCheckToken}"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,WAAW,QAAQ,aAAa;AAEzC,eAAeC,aAAaA,CAAA,EAAE;EAAAC,EAAA;EAC1B,MAAMC,QAAQ,GAACH,WAAW,CAAC,CAAC;EAC5B,IAAI;IACA,MAAMI,KAAK,GAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAEzC,IAAGF,KAAK,EAAC;MACL,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,sBAAuB,8BAA6B,EAAC;QAC7FC,MAAM,EAAC,MAAM;QACbC,OAAO,EAAC;UACJ,cAAc,EAAC;QACnB,CAAC;QACDC,IAAI,EAACC,IAAI,CAACC,SAAS,CAAC;UAACZ;QAAK,CAAC;MAC/B,CAAC,CAAC;MACF,MAAMa,MAAM,GAAC,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;MAClC,IAAGX,QAAQ,CAACY,MAAM,IAAE,GAAG,EAAC;QACpBd,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;QAChC,MAAM,IAAIC,KAAK,CAACJ,MAAM,CAACK,OAAO,CAAC;MACnC;MACA,OAAOlB,KAAK;IAChB;EACJ,CAAC,CAAC,OAAOmB,KAAK,EAAE;IACZpB,QAAQ,CAACJ,QAAQ,CAAC,IAAI,CAAC,CAAC;IACxByB,OAAO,CAACD,KAAK,CAACA,KAAK,CAACD,OAAO,CAAC;EAChC;AACJ;AAACpB,EAAA,CAxBcD,aAAa;EAAA,QACTD,WAAW;AAAA;AAyB9B,SAAQC,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}