{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Materii ASE\\\\Lucrare de licenta\\\\SoftwareProduct\\\\my-react-app\\\\src\\\\components\\\\AssetsList.js\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { fetchServer } from '../api_s/fetchServer';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setAssets, setLastUpdate, setError, setLoading } from '../store/slices/slice';\nimport Table from './layout/Table';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AssetsList() {\n  _s();\n  const collection = useSelector(state => state.global.collection);\n  const error = useSelector(state => state.global.error);\n  const loading = useSelector(state => state.global.loading);\n  const dispatch = useDispatch();\n  //eg.: dispatch(setCollection('stocks'))\n  useEffect(() => {\n    dispatch(setLoading(true));\n    fetchServer(collection).then(el => {\n      if (el.data) {\n        dispatch(setAssets(el.data));\n        dispatch(setLastUpdate(el.timestamp));\n        dispatch(setError(null));\n      } else {\n        dispatch(setLastUpdate(null));\n        dispatch(setAssets(null));\n        dispatch(setError(el));\n      }\n    }).catch(err => console.error(err));\n    setTimeout(() => {\n      dispatch(setLoading(false));\n    }, 5000);\n  }, [collection]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: !error ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: !loading ? /*#__PURE__*/_jsxDEV(Table, {\n        watchlist: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Salut\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 21\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"//TODO\"\n    }, void 0, false)\n  }, void 0, false);\n}\n_s(AssetsList, \"hOtPeMKwjpyeTxF/GFfxJ5tdCHM=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n_c = AssetsList;\nexport default AssetsList;\nvar _c;\n$RefreshReg$(_c, \"AssetsList\");","map":{"version":3,"names":["useEffect","fetchServer","useSelector","useDispatch","setAssets","setLastUpdate","setError","setLoading","Table","jsxDEV","_jsxDEV","Fragment","_Fragment","AssetsList","_s","collection","state","global","error","loading","dispatch","then","el","data","timestamp","catch","err","console","setTimeout","children","watchlist","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/User/Materii ASE/Lucrare de licenta/SoftwareProduct/my-react-app/src/components/AssetsList.js"],"sourcesContent":["import { useEffect } from 'react'\r\nimport {fetchServer} from '../api_s/fetchServer'\r\nimport {useSelector ,useDispatch} from 'react-redux'\r\nimport {setAssets,setLastUpdate,setError,setLoading } from '../store/slices/slice'\r\nimport Table from './layout/Table'\r\n\r\nfunction AssetsList(){\r\n    const collection=useSelector(state=>state.global.collection)\r\n    const error=useSelector(state=>state.global.error)\r\n    const loading = useSelector(state=>state.global.loading)\r\n\r\n    const dispatch=useDispatch()\r\n    //eg.: dispatch(setCollection('stocks'))\r\n    useEffect(()=>{\r\n        dispatch(setLoading(true))\r\n        fetchServer(collection).then(el=>{\r\n            if(el.data){\r\n                dispatch(setAssets(el.data))\r\n                dispatch(setLastUpdate(el.timestamp))\r\n                dispatch(setError(null))\r\n            }\r\n            else{\r\n                dispatch(setLastUpdate(null))\r\n                dispatch(setAssets(null))\r\n                dispatch(setError(el))\r\n            }\r\n        }).catch(err=>console.error(err))\r\n        setTimeout(()=>{\r\n            dispatch(setLoading(false))\r\n        },5000)\r\n    },[collection])\r\n    return(\r\n        <>\r\n            {!error \r\n                ?\r\n                <>\r\n                {!loading ?\r\n                    <Table watchlist={false}/> \r\n                        :\r\n                    <div>Salut</div>\r\n                }\r\n                </>\r\n                :\r\n                <>\r\n                    //TODO\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}\r\nexport default AssetsList"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAAQC,WAAW,QAAO,sBAAsB;AAChD,SAAQC,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,SAAQC,SAAS,EAACC,aAAa,EAACC,QAAQ,EAACC,UAAU,QAAQ,uBAAuB;AAClF,OAAOC,KAAK,MAAM,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAElC,SAASC,UAAUA,CAAA,EAAE;EAAAC,EAAA;EACjB,MAAMC,UAAU,GAACb,WAAW,CAACc,KAAK,IAAEA,KAAK,CAACC,MAAM,CAACF,UAAU,CAAC;EAC5D,MAAMG,KAAK,GAAChB,WAAW,CAACc,KAAK,IAAEA,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EAClD,MAAMC,OAAO,GAAGjB,WAAW,CAACc,KAAK,IAAEA,KAAK,CAACC,MAAM,CAACE,OAAO,CAAC;EAExD,MAAMC,QAAQ,GAACjB,WAAW,CAAC,CAAC;EAC5B;EACAH,SAAS,CAAC,MAAI;IACVoB,QAAQ,CAACb,UAAU,CAAC,IAAI,CAAC,CAAC;IAC1BN,WAAW,CAACc,UAAU,CAAC,CAACM,IAAI,CAACC,EAAE,IAAE;MAC7B,IAAGA,EAAE,CAACC,IAAI,EAAC;QACPH,QAAQ,CAAChB,SAAS,CAACkB,EAAE,CAACC,IAAI,CAAC,CAAC;QAC5BH,QAAQ,CAACf,aAAa,CAACiB,EAAE,CAACE,SAAS,CAAC,CAAC;QACrCJ,QAAQ,CAACd,QAAQ,CAAC,IAAI,CAAC,CAAC;MAC5B,CAAC,MACG;QACAc,QAAQ,CAACf,aAAa,CAAC,IAAI,CAAC,CAAC;QAC7Be,QAAQ,CAAChB,SAAS,CAAC,IAAI,CAAC,CAAC;QACzBgB,QAAQ,CAACd,QAAQ,CAACgB,EAAE,CAAC,CAAC;MAC1B;IACJ,CAAC,CAAC,CAACG,KAAK,CAACC,GAAG,IAAEC,OAAO,CAACT,KAAK,CAACQ,GAAG,CAAC,CAAC;IACjCE,UAAU,CAAC,MAAI;MACXR,QAAQ,CAACb,UAAU,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC,EAAC,IAAI,CAAC;EACX,CAAC,EAAC,CAACQ,UAAU,CAAC,CAAC;EACf,oBACIL,OAAA,CAAAE,SAAA;IAAAiB,QAAA,EACK,CAACX,KAAK,gBAEHR,OAAA,CAAAE,SAAA;MAAAiB,QAAA,EACC,CAACV,OAAO,gBACLT,OAAA,CAACF,KAAK;QAACsB,SAAS,EAAE;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC,gBAE1BxB,OAAA;QAAAmB,QAAA,EAAK;MAAK;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC,gBAElB,CAAC,gBAEHxB,OAAA,CAAAE,SAAA;MAAAiB,QAAA,EAAE;IAEF,gBAAE;EAAC,gBAET,CAAC;AAEX;AAACf,EAAA,CA3CQD,UAAU;EAAA,QACEX,WAAW,EAChBA,WAAW,EACPA,WAAW,EAEZC,WAAW;AAAA;AAAAgC,EAAA,GALrBtB,UAAU;AA4CnB,eAAeA,UAAU;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}